[title]: # (Secret Server Release Notes 10.7.000059)
[tags]: # (Release Notes)
[priority]: # (1000)
[display]: # (search,content,print)

# Secret Server: 10.7.000059 Release Notes

December 9, 2019

>**Note:** The system requirements last changed with version 10.7.000000. See [that version's release notes](./ss-rn-10-7-000000.md) for details.

## Upgrade Notes

- Fixed an issue with Legacy SAML. Customers are encouraged to migrate to Secret Server's updated SAML if still using the Legacy version. See the [SAML 2.0 Configuration Guide](https://thycotic.force.com/support/s/article/SS-SAML-Config-Guide).
- This release launches a new web password filler. To update your web password filler extension, go to the extension download site for your browser and platform.
- Customers with multi-node environments using Advanced Session Recording will need to update all ASR agents after your Secret Server upgrade to take advantage of the RabbitMQ failover updates in this release. We recommend doing so, but not doing so will not impact current functionality. See the "RMQ Failover" note below and the Secret Server Advanced Session-Recording Agent Installation KBA.
- Users will be directed to the dashboard Overview tab for their first login after upgrading.

## New Features

### Data Retention

Secret Server now allows administrators to permanently delete audit records for tables that either contain Personal Identifiable Information (PII) or tables that can grow large in enterprise environments. To configure these settings admins need to add the permission "Administer Data Retention" to the user's role and then the user can navigate to **Admin > Data Retention**. Only users with the "Unlimited Administrator" permission can assign this new permission. See the "Data Retention" section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

### Manual Rolling Upgrades

A new "Manual Rolling Upgrade" feature is available when upgrading from Secret Server version 10.7.000059 or above. Using this process, customers using clustered web nodes with a load balancer can experience little-to-no downtime during the upgrade process, but this process requires manual steps by an admin with Web node and database access. See the [Minimizing Upgrade Downtime](https://thycotic.force.com/support/s/article/SS-BP-EXT-Minimizing-Upgrade-Downtime) KBA.

### RMQ Failover

Updated SS to support durable exchanges for RabbitMQ (RMQ). This allows clustered site connectors to failover without impacting SS's processing. Distributed engines will auto-update after SS's upgrade to also support durable exchanges through RMQ.

> **Note:**  Older Advanced Session Recording Agents (ASRA) can be used with this version of SS but ASRAs will not benefit from this change to failover handling. To include failover capability for ASRA an updated agent must be deployed. See the [Secret Server Advanced Session-Recording Agent Installation](https://thycotic.force.com/support/s/article/SS-INST-EXT-Adv-Session-Rec-Agent) KBA.

**Technical Details:** The ExchangeDeclare logic in MessageQueue client was altered to attempt to create durable exchanges with logging. A durable exchange is automatically re-created if RabbitMQ restarts for any reason. Non-durable exchanges disappear when RMQ goes down and can only be re-created by some external action. If the new logic detects that creating the durable queue failed, it will log an error and attempt to create a non-durable queue.

>**Note:** The presence of legacy non-durable exchanges can prevent the automatic creation of durable exchanges. See [RabbitMQ Durable Exchanges](../backup-and-disaster-recovery/rabbitmq-durable-exchanges/index.md)

### Time-Based One-Time Passwords (TOTP)

Added a new feature where Secret Server can now generate time-based one-time passwords (TOTP) for web secrets. This allows users to implement TOTP on shared secrets. Configuring secrets for TOTP begins at the secret template level. See the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

### Truncated Log Data

Added the ability to truncate table logs for several types of data that log to the "Status Message" table. These messages can contribute to excessive log data and slow performance. The option to truncate each message type is called "Days to Keep Operational Logs" and is under the "Advanced" sections on the following list of configuration pages. Minimum message retention time is one day and the default is 30 days. The logs include:

- AdminDiscovery.aspx (**Admin \> Discovery**)
- AdminSearchIndexer.aspx (**Admin \> Search Indexer**)
- ConfigurationActiveDirectory.aspx (**Admin \> Active Directory**)
- AdminSearchIndexer.aspx (**Admin \> Search Indexer**)
- ConfigurationSshProxy.aspx (**Admin \> SSH Proxy**)
- ConnectWiseConfiguration.aspx (**Admin \> Folder Sync**) Setting only available when using the "Database" Folder Synchronization Method on this page.

Go to the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide) and search for "Days to Keep Operational Logs" to see all the locations where this can be configured.

**Technical details:** A background task was added that scans the status message table every 12 hours and checks the status messages against configured values for how long they should be retained. These configured values were added to applicable UI pages.

### Web Browser Plugins

The Web browser plugins for SS were rebuilt with a new look and feel and now have additional browser and site support. These new plugins are available for:

- Google Chrome
- Mozilla Firefox
- Microsoft EdgeKeep Secret Name History
- Opera

These features from the old browser plugins have been improved to allow more flexibility:

- Create secrets
- Select secret template
- Generate complex password

Users can now authenticate to SS directly from the Web plugin, including support for 2FA options, such as DUO. Log in via SS is also available for users with single sign-on, SAML, or other multi-factor authentication mechanisms. Web plugins automatically identify manual entry of new credentials in a Web page and offer to save the credentials as a secret. There is also improved support for sites that use multi-page login mechanisms.

See the **Web Password Filler** section of the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide) for more information.

## Enhancements

### Advanced Session Recording

Added a new setting to disable keystroke data from advanced session recording metadata. The new setting is called "Default Keystroke Recording Configuration" and can be configured under **Admin \> Configuration \> Session Recording \> Configure Advanced Session Recording.** Click **Collection name** to edit individual collection settings or agent settings. By default, advanced session recording keystrokes are enabled. See the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

### Remote Password Changing upon Regex-Defined Error

Added a new regex setting to automatically retry a remote password change (RPC) with a regenerated password if the original RPC failed due to a specific type of error.

Go to **Admin > Remote Password Changing**, click **Advanced** under the **Configure Password Changers** section. The new setting is **Attempt Password Change with new password when error contains (regex)**. Edit it to provide the regex failure code that will trigger the automatic next password RPC. See the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

### Discovery

Added messaging for when computer or dependency scans do not run due to having no scanners configured for a discovery source.

### Distributed Engine Offline Status

Updated the definition of distributed engines' offline status to be the configured heartbeat interval times three. For instance, if your heartbeat interval is configured at 5 minutes, the engine will report offline if SS and the engine do not successfully communicate within a 15-minute time period. Engine online and offline states were also added to subscription actions to allow notification to admins when engine states change. See the Event Subscriptions section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

### New User Interface

- Redesigned the Admin landing space. Click **Admin > "See All"** to explore the new layout.
- Redesigned Doublelock. See the DoubleLock section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).
- Added new "Recent Activity" section to the Home dashboard page to display recent activity at a glance.
- Redesigned Doublelock. See the DoubleLock section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).
- Updated the IP Address Management pages under Admin.
- Redesigned Doublelock. See the DoubleLock section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).
- Added dark mode theme option in the new UI. To change theme mode preferences, go to **Account Settings > Color Mode**. Options include Light Mode, Dark Mode, or Default (mode will update based on user's OS color mode settings).
- Redesigned Doublelock. See the DoubleLock section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).
- Converted the Groups page to the new UI.
- Redesigned Doublelock. See the DoubleLock section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).
- Updated the date picker to allow for future start dates and time selection without first adjusting the end date when requesting secret access. End dates are automatically adjusted to align with the start date +1 hour.
- Updated grid downloads in the new UI to download according to new options. User options now include choices to download all data or specific rows of data, and specify date format. You can also choose time zone options of UTC, server time zones, or the local browser time zones.

  > **Note**: for downloaded reports users' time zone options are limited to UTC or the server time zone.

- Updated behavior of new UI so that clicking the "Select All" check box at the top of a secret grid selects all rows. Previously the check box selected only the items currently loaded on the page.
- Added the "View Audit" button to the reports page of new UI.
- Added the "Upgrade Available" banner to display in the new UI.
- Added the ability to drag-and-drop child folders into the root folder. Folders will automatically re-order alphabetically in the left navigation pane.

  > **Note**: This action is only allowed if users have the "Create root folder" permission and own folders that they are attempting to move.

- Added folders to the "Shared With Me" page.
- Added new inbox notifications including "getting started" notifications for new installs and administrator alerts when an instance is close to hitting licensing limits.
- Added the ability to mark Inbox notifications as read or unread for most notification types.
- Added new inbox notifications including "getting started" notifications for new installs and administrator alerts when an instance is close to hitting licensing limits.
- Updated Favorite star icons to remain in column view when the Name column is resized.
- Added new inbox notifications including "getting started" notifications for new installs and administrator alerts when an instance is close to hitting licensing limits.
- Grid results updated to auto-load 30 results instead of 15.


### Licensing

A second distributed engine is now available, by default, for the local site.

### Reports

- Updated several reports to no longer show deleted secrets.
- A new out-of-the-box report called "Secret Templates without an expiration field" was added to display any secret templates that have a password field but do not have an expiration field set.

### Secret Template Import and Export

Updated secret template settings for importation and exportation to include:

- Is Required?
- Edit Requires
- Hide on View
- Edit Requires
- Keep Secret Name History
- Edit Requires
- Field Slug Name
- Edit Requires
- One Time Password settings

 The secret template settings that do **not** transfer include:

- Launcher settings
- Password changing settings
- Session recording enabled
- Associated secrets

See the [Can I import or export data between Secret Servers?](https://thycotic.force.com/support/s/article/Can-I-import-export-data-between-Secret-Servers) KBA for more information.


### SSH Proxy

- Updated "connect as" to accept key-based SSH authentication without also requiring a manual password.
- For SSH proxy sessions, added the option set:

  - Only record keystrokes
  - Only record video for sessions.

  By default new installs will only record keystrokes on SSH proxy sessions to preserve disk space. To configure this setting go to **Admin \> Configuration \> Session Recording tab \> SS Proxy Session Recording**. Edit the **SSH Proxy Session Recording Options** dropdown list. The options include:

  - Record keystrokes and video


  - Record keystrokes only

  - Record video only


  - Do not record


See the Session Recording section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

### Verbose Logging

Added Verbose Logging for:

- AWS password changers
- AWS discovery scanner
- ComPlus dependency scanner
- AWS discovery scanner
- Flat file discovery scanner
- AWS discovery scanner
- SSH discovery scanner
- ESX discovery scanner


### Terminal

- Added terminal instructions for how to view SSH proxy credentials in the new UI under **Secret Options \> Show SSH Terminal Details**.
- Removed restrictions from the allowed number of concurrent logins for SSH terminal. Previously, terminal logins were tied to the "Maximum concurrent logins per user" setting that establishes this number for UI-based users.
- Added Unicode support for SSH command menu items (names and descriptions).
- Added "clear" command to terminal.


### Database SQL Indexes

Added new SQL indexes for the following areas:

- Column LauncherSessionGuid on the Launcher Session Video (tbLauncherSessionVideoSegment)
- Event Queue Monitor (tbEventQueue)
- Expired Secret Monitor (tbSecretDependency table)
- Event Queue Monitor (tbEventQueue)
- General Navigation (tbUserSession)
- Event Queue Monitor (tbEventQueue)
- Log In (tbUser)
- Event Queue Monitor (tbEventQueue)
- Secret Log table (tbSecretLog)
- System Reports (tbAuditUser, tbAuditSecret)

### Unique Field Slug IDs

Added a new "Unique Field Slug" ID column for secret templates to allow users to create secrets with duplicate field names without compromising the ability to target each field name with a unique identifier for API calls. See the Secret Template Field Types section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

### User Variables for Scripting

Added the following user-based script variables to be used in API calls as arguments:

- `$SECRETSERVERUSERID`
- `$SECRETSERVERUSERNAME`
- `$SECRETSERVERDISPLAYNAME`
- `$SECRETSERVEREMAILADDRESS`

This allows, for example, that when a specific user runs a check-out hook, they can pass a user email, ID, username, or display name as a parameter into the script to use a check-out hooks and related AD functionality in SS through the API. See the "Checkout Hooks" section in the [Secret Server Administration Guide](https://thycotic.force.com/support/s/article/SS-ADM-EXT-Admin-Guide).

## API and Scripting

### API General

Added a setting that allows users with view permission on a secret to get the secret's "autoChangeNextPassword" field in the API. This setting is enabled under **Admin > Configuration > Permission Options**. Set **Allow View User To Retrieve Auto-Change Next Password** to **Yes**.

### New API Calls

- Get one time password code and seconds: `GET /one-time-password-code/{id}`
- Search secrets by URL: `POST /secret-extensions/search-by-url`
- Get AutoFill values for URL by secret ID: `POST /secret-extensions/autofill-values`
- Search secrets by URL: `POST /secret-extensions/search-by-url`
- Update secret: `PUT /secrets/{id}/restricted`
- Search secrets by URL: `POST /secret-extensions/search-by-url`
- Get extended regex values by secret: `GET /extended-fields/regex/{secretId}`


### Removed API Calls

- Search app clients: `GET /app-clients`
- Update secret: `PUT /secrets/{id}`
- Update secret field: `PUT /secrets/{id}/restricted/fields/{slug}`

## Integrations

- Added support for Open ID Connect to integrate with Secret Server authentication. See the [Open ID Connect Integration Guide](https://thycotic.force.com/support/s/article/SS-INTG-EXT-Open-ID).
- Added Connection Manager as a tools option in the grid menu and under the Admin space in the new UI. See the [Connection Manager User Guide](https://thycotic.force.com/support/s/article/Connection-Manager-Download-and-User-Guide).

## Performance Improvements

- Added server-side paging to reports in the new UI to address performance issues when attempting to load reports with large numbers of records.
- The new UI will no longer load the subfolders If a parent folder has more than 30 subfolders within it on the grid page. Instead, a folder picker will display above the folder's secrets that will allow users to select a specific subfolder.
- Applied enhanced SQL querying logic on the groups pages so that environments with large groups no longer experience page timeouts when processing group data.
- The new UI will no longer load the subfolders If a parent folder has more than 30 subfolders within it on the grid page. Instead, a folder picker will display above the folder's secrets that will allow users to select a specific subfolder.
- Removed the welcome widget from the dashboard on the classic UI due to page load issues in large environments.
- The new UI will no longer load the subfolders If a parent folder has more than 30 subfolders within it on the grid page. Instead, a folder picker will display above the folder's secrets that will allow users to select a specific subfolder.
- Added a new "use database paging" setting for the custom reports page. Database paging allows the database to load large reports more quickly. We recommend database paging if the query is expected to pull large amounts of data for the report. Implementing database paging may not work if the SQL query uses some keywords, including TOP, OPTION, INSERT, UNION, WITH, or aliases containing the word FROM.

  Example queries:

  - Works using database paging: `SELECT * FROM tbSecret WHERE NAME LIKE 'Test%'`


  - Does not work using database paging: `SELECT TOP 10 * FROM tbSecret WHERE SecretName LIKE 'Test%'`

## Security

- Updated PuTTY to version 0.73. Updated version addresses several PuTTY vulnerabilities, including one critical and two high severity items. CVE-2019-17067, CVE-2019-17068, CVE-2019-17069
- Addressed a vulnerability with the SDK client account handler.
- Fixed a permissions issue in the new UI where password requirements did not obey the "administer custom password requirements" permission.
- Addressed a vulnerability with the SDK client account handler.
- Addressed a Remote Code Execution (RCE) vulnerability that allowed parameter changes for an action without validating user permissions.
- Resolved an issue for SSH scripts and SSH remote password changers where sensitive information was being written to log files:

  - SSH remote password changers will now only log the comment for each command as it runs.
  - SSH scripts will only log that they ran because they have no comment for each command.

   > **Note**: If you manually test an SSH script or password changer, the full output will still be shown for debugging purposes, because you just entered the credentials yourself.

- Resolved a URL redirection vulnerability.
- Added configurable parameter quoting for custom launchers.
- Resolved three cross-site scripting (XSS) vulnerabilities.
- Added configurable parameter quoting for custom launchers.
- Removed user information that was returned in an API call.
- Added configurable parameter quoting for custom launchers.
- Added auditing for test script actions in the **Custom Command Edits** section in the **Admin \> Scripts** pages.
- Added configurable parameter quoting for custom launchers.
- Updated missing secure cookie attributes when "Force HTTPS" is enabled.
- Added configurable parameter quoting for custom launchers.
- Added SHA1 and SHA256 hashes for protocol handler.
- All Thycotic DLLs and EXEs are now signed with the Thycotic Software certificate including distributed engine, advanced session recording agent, and MemoryMQ applications.

## Bug Fixes

- Fixed an issue where creating folders through the API failed to set a secret policy.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed an issue where an access approval email link did not work if Integrated Windows Authentication (IWA) and two-factor authentication were enabled.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed an issue where pressing Enter with the cursor in the Search bar on the Discovery Network View page would open the create rule dialog.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Added clear error and validation in entering credentials for a discovery scanner.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed a bug where some pages in the old UI did not follow customized headers from CSS stylesheets.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed issue where non-AD discovery sources (ESX, PowerShell) would not match dependencies with domain to an existing AD Domain. If the dependency scan item has a field called "domain," it will attempt to map to an existing domain.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Added a query to resolve sort ordering issues for dependency numbering.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed a "bad token" error on login for mobile apps (Windows Desktop, iOS, or Android) for local users.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed a ticketing system bug where the option to require users to either provide a ticket number or a comment for requesting access incorrectly required both a comment and a ticket number to access the secret. This issue existed when requesting access to the secret through the UI, workflows, or terminal.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed a rendering issue for the group edit page when using the IE browser.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed an issue where an "object disposed" exception was thrown when navigating away from the new UI soon after application pools were recycled. This occurred because of an incorrect re-use of a service that is for processing the first Web request to the application.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed a bug where custom columns on grids in the new UI occasionally tried to display the same column twice and threw an error.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Fixed an issue where Duo authentication was not checking for valid fallback device options when the configured "default device" failed to authenticate.
- Fixed a memory leak issue where leaving Mac launcher sessions open for extended periods of time consumed increasing amounts of memory on the machine hosting the session. This issue was incorrectly believed to be fixed in the SS version 10.7.000002 release.
- Resolved a timing issue where secrets with scheduled password changes enabled would get erroneous heartbeat fails due to remote password change (RPC) expiration and heartbeat occurring at the same time. Now heartbeats are skipped for an interval of five minutes before and after a scheduled password change to allow password change completion before heartbeat is attempted.
