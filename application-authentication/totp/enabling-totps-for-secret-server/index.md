[title]: # (Enabling TOTPs for Secret Server)
[tags]: # (XXX)
[priority]: # (20)

# Enabling TOTPs for Secret Server

Most commonly, time-sensitive one-time passwords (TOTPs) are generated by a mobile application, such as Google Authenticator or Microsoft Authenticator. SS can be used as the TOTP generator for RPC or launchers. Both the secret and the secret template require configuration for this use.

#### Secret Template Setup

To enable TOTP on a SS template:

1. Go to **Admin \> Secrete Template**.

1. Select the desired template, and click the **Edit** button. The Secret Template Designer appears.

1. Navigate to the bottom of the page:

   ![image-20191113134048886](assets/image-20191113134048886.png)

1. Click to select the **One Time Password Enabled** check box. This enables to most common settings:

   Length: 6
   Duration: 30
   Hash: SHA1

   > **Note:** These are the values that most one-time password instances, such as Google and Microsoft Authenticator, use today. If you use these settings with another OTP provider and are unable to successfully use generated codes to authenticate, please review their documentation and adjust these settings as required.

1. Save the secret template. Any secret based upon this template can now use TOTP.

#### TOTP Secret Setup

Once a secret template is set up for TOTP, each secret based on that template also needs to be set up:

1. Click the **Secrets** menu item in the dashboard.

1. Open the desired secret.

1. Click the **Settings** tab:

   ![image-20191113135654468](assets/image-20191113135654468.png)

1. Click to select the **Generate One-Time Passwords** check box in the **TOTP** section. This exposes two text boxes:

   ![image-20191114092731354](assets/image-20191114092731354.png)

1. Type the TOTP key in the **TOTP Key** text box. The TOTP Key is generated by the OTP-protected asset when you set up your account to use TOTP. Usually, you are prompted with a QR bar code that you can scan with a mobile device, or you can expose the key that the QR code represents. This text string is the value that is placed into the TOTP Key field. 

   > **Important:** Treat the TOTP key and backup codes like you would any other password! If anyone obtains the key, it can be used to set up a valid TOTP generator for that account on any device, allowing that person to bypass the protection. Similarly, the backup codes allow users to temporarily bypass protection.

   > **Note:** If you have an account that has been TOTP protected and you did not save the TOTP key upon creation, you must deactivate TOTP on that account and then reactivate it to retrieve the TOTP key to set up SS.

1. Type the TOTP backup codes in the **TOTP Backup Codes** text box. The TOTP Backup Codes are often presented to a user while initially setting up an account for TOTP. These backup codes are single-use codes for use if a TOTP generator is not available or working. Again, these codes will be valid and allow the holder to get past the two-factor authorization to access an account, so protect them as you would a password!
